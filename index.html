                    th new attributes
            const [playerForm, setPlayerForm] = useState({
                name: '',
                defense: 3,
                serving: 3,
                serveReceive: 3,
                setting: 3,
                allAround: 3,
                active: true,
                star: false
            });

            // Court positions (6 on court, rest on bench)
            const [courtPositions, setCourtPositions] = useState(() => 
                loadFromStorage('volleyball_courtPositions', {
                    backLeft: null,
                    frontLeft: null,
                    frontMiddle: null,
                    frontRight: null,
                    backRight: null,
                    backMiddle: null,
                    bench: []
                })
            );

            // Save to localStorage whenever data changes
            useEffect(() => {
                saveToStorage('volleyball_players', players);
            }, [players]);

            useEffect(() => {
                saveToStorage('volleyball_teamName', teamName);
            }, [teamName]);

            useEffect(() => {
                saveToStorage('volleyball_minThreshold', minThreshold);
            }, [minThreshold]);

            useEffect(() => {
    Count(prev => prev + 1);
                    setSubHistory(prev => [...prev, {
                        rotation: direction,
                        out: rotatingOutPlayer.name,
                        in: subPartner.name,
                        position: direction === 'forward' ? 'backMiddle' : 'backLeft'
                    }]);
                } else {
                    // No substitution - player continues rotation
                    bench: [...currentPos.bench]
                                };
                                const newBench = [...currentPos.bench];
                                if (newBench.length > 0) {
                                    newBench.push(currentPos.backLeft);
                                    newPos.backMiddle = newBench.shift();
                                } else {
                                    newPos.backMiddle = currentPos.backLeft;
                                }
                                newPos.bench = newBench;
                                currentPos = newPos;
                            }
                            
                                          const newPositions = {
                    frontLeft: courtPositions.backLeft,
                    frontMiddle: courtPositions.frontLeft,
                    frontRight: courtPositions.frontMiddle,
                    backRight: courtPositions.frontRight,
                    backMiddle: courtPositions.backRight,
                    bench: [...courtPositions.bench]
                };

                const newBench = [...courtPositions.bench];
                newBench.unshift(courtPositions.backMiddle);
                
                if (newBench.length > 0) {
                    newPositions.backLeft = newBench.pop();
                }
                
                newPositions.bench = newBench;
                setCourtPositions(newPositions);
            };

            // Drag and Drop handlers
            const handleDragStart = (e, player) => {
                setDraggedPlayer(player);
                e.dataTransfer.effectAllowed = 'move';
            };

            const handleDragOver = (e) => {
                e.preventDefault();
                e.dataTransfer.dropEffect = 'move';
            };

            const handleDragEnter = (e, zone) => {
                e.preventDefault();
                setDropZone(zone);
            };

            const handleDragLeave = (e) => {
                e.preventDefault();
                setDropZone(null);
            };

            const handleDrop = (e, targetPosition) => {
                e.preventDefault();
                if (!draggedPlayer) return;

                const newPositions = { ...courtPositions };
                
                let currentPosition = null;
                Object.keys(newPositions).forEach(pos => {
                    if (pos === 'bench') {
                        const benchIndex = newPositions[pos].findIndex(p => p.id === draggedPlayer.id);
                        if (benchIndex >= 0) {
                            currentPosition = { type: 'bench', index: benchIndex };
                        }
                    } else if (newPositions[pos] && newPositions[pos].id === draggedPlayer.id) {
                        currentPosition = { type: 'court', position: pos };
                    }
                });

                if (currentPosition) {
                    if (currentPosition.type === 'bench') {
                        newPositions.bench.splice(currentPosition.index, 1);
                    } else {
                        newPositions[currentPosition.position] = null;
                    }
                }

                if (targetPosition === 'bench') {
                    newPositions.bench.push(draggedPlayer);
                } else if (targetPosition.startsWith('bench-')) {
                    const index = parseInt(targetPosition.split('-')[1]);
                    newPositions.bench.splice(index, 0, draggedPlayer);
                } else {
                    if (newPositions[targetPosition]) {
                        if (currentPosition && currentPosition.type === 'court') {
                            newPositions[currentPosition.position] = newPositions[targetPosition];
                        } else if (currentPosition && currentPosition.type === 'bench') {
                            newPositions.bench.splice(currentPosition.index, 0, newPositions[targetPosition]);
                        }
                    }
                    newPositions[targetPosition] = draggedPlayer;
                }

                setCourtPositions(newPositions);
                setDraggedPlayer(null);
                setDropZone(null);
            };

            // Calculate current strengths based on play mode
            const calculateCurrentStrengths = () => {
                if (playMode === 'rotational') {
                    return calculateRotationStrengths(courtPositions).slice(0, 6);
                } else {
                    // For substitutional mode, calculate serve receive and setting strengths
                    const rotations = [];
                    let currentPositions = { ...courtPositions };
                    
                    for (let i = 0; i < 6; i++) {
                        const backRowSR = (currentPositions.backLeft?.serveReceive || 0) + 
                                         (currentPositions.backMiddle?.serveReceive || 0) + 
                                         (currentPositions.backRight?.serveReceive || 0);
                        
                        const frontRowSetting = (currentPositions.frontLeft?.setting || 0) + 
                                               (currentPositions.frontMiddle?.setting || 0) + 
                                               (currentPositions.frontRight?.setting || 0);
                        
                        rotations.push({
                            backRowSR,
                            frontRowSetting,
                            serverRating: currentPositions.backLeft?.serving || 0,
                            rotation: i
                        });
                        
                        const newPositions = {
                            backRight: currentPositions.backMiddle,
                            frontRight: currentPositions.backRight,
                            frontMiddle: currentPositions.frontRight,
                            frontLeft: currentPositions.frontMiddle,
                            backLeft: currentPositions.frontLeft,
                            backMiddle: currentPositions.backLeft,
                            bench: [...currentPositions.bench]
                        };
                        currentPositions = newPositions;
                    }
                    
                    return rotations;
                }
            };

            const currentStrengths = calculateCurrentStrengths();
            const PlayerTile = ({ player, position, isOnCourt, benchIndex }) => {
                const subColorClass = player.subColor !== null ? SUB_COLORS[player.subColor] : '';
                const isNoSub = playMode === 'substitutional' && player.star;
                
                return React.createElement('div', {
                    className: `p-3 rounded-lg shadow-md cursor-pointer transition-all ${
                        player.active 
                            ? (isOnCourt ? 'bg-blue-100 border-2 border-blue-500' : 'bg-green-100 border-2 border-green-400')
                            : 'bg-gray-200 border-2 border-gray-300'
                    } ${isNoSub ? 'no-sub-player' : subColorClass} ${
                        playMode === 'rotational' && player.star ? 'star-player' : ''
                    } ${draggedPlayer && draggedPlayer.id === player.id ? 'dragging' : ''}`,
                    draggable: true,
                    onDragStart: (e) => handleDragStart(e, player),
                    onClick: () => handleEditPlayer(player)
                },
                    React.createElement('div', { className: "flex items-center justify-between" },
                        React.createElement('div', { className: "font-semibold text-sm" }, player.name),
                        React.createElement('div', { className: "flex gap-1" },
                            (playMode === 'rotational' && player.star) && React.createElement('span', { className: "text-yellow-500 text-xs" }, 'â­'),
                            (playMode === 'substitutional' && player.star) && React.createElement('span', { className: "text-yellow-500 text-xs" }, 'ðŸ¥‡'),
                            (playMode === 'substitutional' && player.subPair) && React.createElement('span', { className: "text-blue-500 text-xs" }, 'ðŸ”—')
                        )
                    ),
                    position && React.createElement('div', { className: "text-xs text-gray-600 mt-1" }, position)
                );
            };

            const DropZone = ({ position, currentPlayer, label }) => (
                React.createElement('div', {
                    className: `h-16 border-2 border-dashed rounded-lg flex items-center justify-center transition-all ${
                        dropZone === position ? 'drop-zone-active' : 'border-gray-300'
                    }`,
                    onDragOver: handleDragOver,
                    onDragEnter: (e) => handleDragEnter(e, position),
                    onDragLeave: handleDragLeave,
                    onDrop: (e) => handleDrop(e, position)
                },
                    currentPlayer ? 
                        React.createElement(PlayerTile, { player: currentPlayer, position: label, isOnCourt: true }) :
                        React.createElement('span', { className: "text-xs text-gray-400" }, "Empty")
                )
            );

            const CourtDisplay = () => (
                React.createElement('div', { className: "bg-orange-50 border-2 border-orange-300 rounded-lg p-4 mb-6" },
                    React.createElement('div', { className: "text-center text-sm font-semibold mb-4 text-orange-800" },
                        `${teamName} - Court Layout (${playMode.charAt(0).toUpperCase() + playMode.slice(1)} Mode)`
                    ),
                    
                    // Current rotation strengths
                    currentStrengths.length > 0 && (
                        React.createElement('div', { className: "mb-4 p-3 bg-white rounded-lg border" },
                            React.createElement('div', { className: "text-xs font-semibold mb-2 text-center" }, 
                                playMode === 'rotational' 
                                    ? `Row Totals (Defense) - Min: ${minThreshold}`
                                    : "Row Totals (SR: Serve Receive, Set: Setting)"
                            ),
                            React.createElement('div', { className: "flex justify-between text-xs mb-2" },
                                playMode === 'rotational' ? (
                                    React.createElement(React.Fragment, {},
                                        React.createElement('div', {}, 
                                            `Front: ${currentStrengths[0]?.frontRowTotal || 0}`,
                                            React.createElement('span', { 
                                                className: `ml-1 ${(currentStrengths[0]?.frontRowTotal || 0) >= minThreshold ? 'text-green-600' : 'text-red-600'}`
                                            }, (currentStrengths[0]?.frontRowTotal || 0) >= minThreshold ? 'âœ“' : 'âœ—')
                                        ),
                                        React.createElement('div', {}, 
                                            `Back: ${currentStrengths[0]?.backRowTotal || 0}`,
                                            React.createElement('span', { 
                                                className: `ml-1 ${(currentStrengths[0]?.backRowTotal || 0) >= minThreshold ? 'text-green-600' : 'text-red-600'}`
                                            }, (currentStrengths[0]?.backRowTotal || 0) >= minThreshold ? 'âœ“' : 'âœ—')
                                        )
                                    )
                                ) : (
                                    React.createElement(React.Fragment, {},
                                        React.createElement('div', {}, `Back SR: ${currentStrengths[0]?.backRowSR || 0}`),
                                        React.createElement('div', {}, `Front Set: ${currentStrengths[0]?.frontRowSetting || 0}`)
                                    )
                                )
                            ),
                            bestLineups.length > 0 && (
                                React.createElement('div', { className: "text-xs text-center text-gray-600" },
                                    `Lineup ${currentLineupIndex + 1} of ${bestLineups.length} best options`
                                )
                            )
                        )
                    ),

                    // Back Row (20 ft line)
                          })
                        )
                    )
                ),

                // Play Mode Toggle
                React.createElement('div', { className: "mb-4 p-3 bg-gray-50 rounded-lg" },
                    React.createElement('div', { className: "text-sm font-medium mb-2" }, "Play Mode"),
                    React.createElement('div', { className: "flex gap-2" },
                        React.createElement('button', {
                            onClick: () => setPlayMode('rotational'),
                            className: `flex-1 py-2 px-3 rounded text-sm font-medium transition-colors ${
                                playMode === 'rotational' 
                                    ? 'bg-blue-500 text-white' 
                                    : 'bg-white border border-gray-300 text-gray-700 hover:bg-gray-50'
                            }`
                        }, "Rotational"),
                        React.createElement('button', {
                            onClick: () => setPlayMode('substitutional'),
                            className: `flex-1 py-2 px-3 rounded text-sm font-medium transition-colors ${
                                playMode === 'substitutional' 
                                    ? 'bg-green-500 text-white' 
                                    : 'bg-white border border-gray-300 text-gray-700 hover:bg-gray-50'
                            }`
                        }, "Substitutional")
                    )
                ),

                // Mode-specific info panel
                playMode === 'rotational' ? (
                    React.createElement('div', { className: "mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg" },
                        React.createElement('div', { className: "text-sm font-medium text-yellow-800 mb-1" },
                            `Star Players: ${players.filter(p => p.star).length}/3`
                        ),
                        React.createElement('div', { className: "text-xs text-yellow-700" },
                            "â­ Select up to 3 star players for rotational optimization. Algorithms ensure 1+ star always on court and prevent adjacent positioning."
                        )
                    )
                ) : (
                    React.createElement('div', { className: "mb-4 p-3 bg-green-50 border border-green-200 rounded-lg" },
                        React.createElement('div', { className: "text-sm font-medium text-green-800 mb-1" },
                            "Substitutional Play Mode"
                        ),
                        React.createElement('div', { className: "text-xs text-green-700 mb-2" },
                            "ðŸ¥‡ Gold tiles = no substitution partner. Matching colors = paired for substitutions."
                        ),
                        React.createElement('div', { className: "text-xs text-green-600" },
                            `No-Sub Players: ${players.filter(p => p.star).length}/3 | Substitutions Made: ${substitutionCount}`
                        )
                    )
                ),

                // Court Display
                React.createElement(CourtDisplay),
                
                // Bench Display
                React.createElement(BenchDisplay),

                // Optimization Controls
                React.createElement('div', { className: "mb-4 p-4 bg-gray-50 rounded-lg" },
                    playMode === 'rotational' && (
                        React.createElement('div', { className: "mb-3" },
                            React.createElement('label', { className: "block text-sm font-medium mb-1" }, 
                                `Minimum Row Total: ${minThreshold}`
                            ),
                            React.createElement('input', {
                                type: "range",
                                min: "3",
                                max: "15",
                                value: minThreshold,
                                onChange: (e) => setMinThreshold(parseInt(e.target.value)),
                                className: "w-full"
                            }),
                            React.createElement('div', { className: "flex justify-between text-xs text-gray-500 mt-1" },
                                React.createElement('span', {}, "3"),
                                React.createElement('span', {}, "15")
                            )
                        )
                    ),
                    React.createElement('div', { className: "flex gap-2" },
                        React.createElement('button', {
                            onClick: optimizeStandardPlay,
                            className: `flex-1 p-3 text-white rounded-lg transition-colors ${
                                isOptimizing ? 'optimizing cursor-not-allowed' : 
                                playMode === 'rotational' ? 'bg-purple-500 hover:bg-purple-600' : 'bg-green-500 hover:bg-green-600'
                            }`,
                            disabled: isOptimizing || players.filter(p => p.active).length < 6
                        },
                            isOptimizing ? "Optimizing..." : 
                            playMode === 'rotational' ? "ðŸŽ¯ Standard Play" : "ðŸŽ¯ Optimize Subs"
                        ),
                        playMode === 'rotational' && (
                            React.createElement('button', {
                                onClick: optimizeServingPriority,
                                className: `flex-1 p-3 text-white rounded-lg transition-colors ${
                                    isOptimizing ? 'optimizing cursor-not-allowed' : 'bg-orange-500 hover:bg-orange-600'
                                }`,
                                disabled: isOptimizing || players.filter(p => p.active).length < 6
                            },
                                isOptimizing ? "Optimizing..." : "âš¡ Serving Priority"
                            )
                        ),
                        React.createElement('button', {
                            onClick: shuffleStandardPlay,
                            className: "px-3 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:bg-gray-400",
                            disabled: bestLineups.length === 0,
                            title: "Shuffle through best lineups"
                        },
                            "ðŸ”€"
                        )
                    ),
                    React.createElement('div', { className: "flex gap-2 mt-2" },
                        React.createElement('button', {
                            onClick: autoArrangePlayers,
                            className: "flex-1 p-3 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition-colors",
                            disabled: players.filter(p => p.active).length < 6
                        },
                            "ðŸ“‹ Basic Setup"
                        )
                    )
                ),

                // Players List
                React.createElement('div', { className: "mb-6" },
                    React.createElement('div', { className: "flex items-center justify-between mb-3" },
                        React.createElement('h2', { className: "text-lg font-semibold" }, `Team Roster (${players.length}/12)`),
                        React.createElement('button', {
                            onClick: () => setShowPlayerForm(true),
                            className: "flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors"
                        },
                            "+ Add Player"
                        )
                    ),
                    
                    React.createElement('div', { className: "space-y-2" },
                        players.map(player => {
                            const subColorClass = player.subColor !== null ? SUB_COLORS[player.subColor] : '';
                            const isNoSub = playMode === 'substitutional' && player.star;
                            const subPartner = player.subPair ? players.find(p => p.id === player.subPair) : null;
                            
                            return React.createElement('div', { 
                                key: player.id, 
                                className: `flex items-center gap-2 p-2 rounded-lg transition-all ${
                                    isNoSub ? 'no-sub-player' : subColorClass || 'bg-white'
                                } ${!player.active ? 'opacity-50' : ''}`
                            },
                                React.createElement('button', {
                                    onClick: () => togglePlayerActive(player.id),
                                    className: `w-4 h-4 rounded border-2 ${
                                        player.active ? 'bg-green-500 border-green-500' : 'border-gray-300'
                                    }`
                                }),
                                React.createElement('button', {
                                    onClick: () => togglePlayerStar(player.id),
                                    className: `w-6 h-6 rounded-full border-2 flex items-center justify-center ${
                                        player.star ? 'bg-yellow-400 border-yellow-500' : 'border-gray-300 hover:border-yellow-400'
                                    }`,
                                    title: playMode === 'rotational' ? 'Star Player' : 'No Substitution Partner'
                                },
                                    React.createElement('span', { className: "text-xs" }, 
                                        player.star ? (playMode === 'rotational' ? 'â­' : 'ðŸ¥‡') : 'â˜†'
                                    )
                                ),
                                React.createElement('div', { 
                                    className: "flex-1 cursor-pointer",
                                    onClick: () => handleEditPlayer(player)
                                },
                                    React.createElement('div', { className: "flex items-center justify-between" },
                                        React.createElement('div', { className: "font-semibold text-sm" }, player.name),
                                        React.createElement('div', { className: "flex gap-1" },
                                            subPartner && React.createElement('span', { 
                                                className: "text-xs text-blue-600",
                                                title: `Paired with ${subPartner.name}`
                                            }, 'ðŸ”—')
                                        )
                                    ),
                                    React.createElement('div', { className: "text-xs text-gray-600" },
                                        playMode === 'rotational' 
                                            ? `D:${player.defense} S:${player.serving}`
                                            : `D:${player.defense} S:${player.serving} SR:${player.serveReceive} Set:${player.setting} AA:${player.allAround}`
                                    )
                                ),
                                playMode === 'substitutional' && (
                                    React.createElement('div', { className: "flex gap-1" },
                                        // Color change buttons for sub pairs
                                        !player.star && player.subPair && SUB_COLORS.map((colorClass, index) => (
                                            React.createElement('button', {
                                                key: index,
                                                onClick: () => changeSubColor(player.id, index),
                                                className: `w-4 h-4 rounded border ${colorClass} ${
                                                    player.subColor === index ? 'border-2 border-black' : 'border-gray-400'
                                                }`,
                                                title: `Change to color ${index + 1}`
                                            })
                                        )),
                                        // Unpair button
                                        !player.star && player.subPair && (
                                            React.createElement('button', {
                                                onClick: () => removeSubPair(player.id),
                                                className: "w-4 h-4 bg-red-500 text-white rounded text-xs flex items-center justify-center",
                                                title: "Remove substitution pairing"
                                            }, "Ã—")
                                        )
                                    )
                                )
                            );
                        })
                    )
                ),
// Enhanced Player Form Modal
                showPlayerForm && (
                    React.createElement('div', { className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" },
                        React.createElement('div', { className: "bg-white rounded-lg p-6 w-80 mx-4 max-h-screen overflow-y-auto" },
                            React.createElement('h3', { className: "text-lg font-semibold mb-4" },
                                editingPlayer ? 'Edit Player' : 'Add New Player'
                            ),
                            
                            React.createElement('div', { className: "space-y-4" },
                                React.createElement('div', {},
                                    React.createElement('label', { className: "block text-sm font-medium mb-1" }, "Player Name"),
                                    React.createElement('input', {
                                        type: "text",
                                        value: playerForm.name,
                                        onChange: (e) => setPlayerForm({...playerForm, name: e.target.value}),
                                        className: "w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",
                                        placeholder: "Enter player name"
                                    })
                                ),
                                
                                // Defense Rating
                                React.createElement('div', {},
                                    React.createElement('label', { className: "block text-sm font-medium mb-1" }, "Defense (1-5)"),
                                    React.createElement('input', {
                                        type: "range",
                                        min: "1",
                                        max: "5",
                                        value: playerForm.defense,
                                        onChange: (e) => setPlayerForm({...playerForm, defense: parseInt(e.target.value)}),
                                        className: "w-full"
                                    }),
                                    React.createElement('div', { className: "text-center font-semibold text-sm" }, playerForm.defense)
                                ),
                                
                                // Serving Rating
                                React.createElement('div', {},
                                    React.createElement('label', { className: "block text-sm font-medium mb-1" }, "Serving (1-5)"),
                                    React.createElement('input', {
                                        type: "range",
                                        min: "1",
                                        max: "5",
                                        value: playerForm.serving,
                                        onChange: (e) => setPlayerForm({...playerForm, serving: parseInt(e.target.value)}),
                                        className: "w-full"
                                    }),
                                    React.createElement('div', { className: "text-center font-semibold text-sm" }, playerForm.serving)
                                ),

                                // Serve Receive Rating
                                React.createElement('div', {},
                                    React.createElement('label', { className: "block text-sm font-medium mb-1" }, "Serve Receive - SR (1-5)"),
                                    React.createElement('input', {
                                        type: "range",
                                        min: "1",
                                        max: "5",
                                        value: playerForm.serveReceive,
                                        onChange: (e) => setPlayerForm({...playerForm, serveReceive: parseInt(e.target.value)}),
                                        className: "w-full"
                                    }),
                                    React.createElement('div', { className: "text-center font-semibold text-sm" }, playerForm.serveReceive)
                                ),

                                // Setting Rating
                                React.createElement('div', {},
                                    React.createElement('label', { className: "block text-sm font-medium mb-1" }, "Setting (1-5)"),
                                    React.createElement('input', {
                                        type: "range",
                                        min: "1",
                                        max: "5",
                                        value: playerForm.setting,
                                        onChange: (e) => setPlayerForm({...playerForm, setting: parseInt(e.target.value)}),
                                        className: "w-full"
                                    }),
                                    React.createElement('div', { className: "text-center font-semibold text-sm" }, playerForm.setting)
                                ),

                                // All Around Rating
                                React.createElement('div', {},
                                    React.createElement('label', { className: "block text-sm font-medium mb-1" }, "All Around (1-5)"),
                                    React.createElement('input', {
                                        type: "range",
                                        min: "1",
                                        max: "5",
                                        value: playerForm.allAround,
                                        onChange: (e) => setPlayerForm({...playerForm, allAround: parseInt(e.target.value)}),
                                        className: "w-full"
                                    }),
                                    React.createElement('div', { className: "text-center font-semibold text-sm" }, playerForm.allAround)
                                ),

                                // Star Player / No Sub Toggle
                                React.createElement('div', { className: "flex items-center gap-2" },
                                    React.createElement('label', { className: "block text-sm font-medium" }, 
                                        playMode === 'rotational' ? 'Star Player' : 'No Substitution Partner'
                                    ),
                                    React.createElement('button', {
                                        onClick: () => setPlayerForm({...playerForm, star: !playerForm.star}),
                                        className: `w-6 h-6 rounded-full border-2 flex items-center justify-center ${
                                            playerForm.star ? 'bg-yellow-400 border-yellow-500' : 'border-gray-300 hover:border-yellow-400'
                                        }`,
                                        type: "button"
                                    },
                                        React.createElement('span', { className: "text-xs" }, 
                                            playerForm.star ? (playMode === 'rotational' ? 'â­' : 'ðŸ¥‡') : 'â˜†'
                                        )
                                    )
                                )
                            ),
                            
                            React.createElement('div', { className: "flex gap-3 mt-6" },
                                React.createElement('button', {
                                    onClick: () => {
                                        setShowPlayerForm(false);
                                        setEditingPlayer(null);
                                        setPlayerForm({ 
                                            name: '', 
                                            defense: 3, 
                                            serving: 3, 
                                            serveReceive: 3, 
                                            setting: 3, 
                                            allAround: 3, 
                                            active: true, 
                                            star: false 
                                        });
                                    },
                                    className: "flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50"
                                }, "Cancel"),
                                React.createElement('button', {
                                    onClick: editingPlayer ? handleUpdatePlayer : handleAddPlayer,
                                    className: "flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",
                                    disabled: !playerForm.name.trim()
                                }, editingPlayer ? 'Update Player' : 'Add Player')
                            )
                        )
                    )
                ),

                // Substitution History Panel (for substitutional mode)
                playMode === 'substitutional' && subHistory.length > 0 && (
                    React.createElement('div', { className: "mb-6 p-3 bg-blue-50 border border-blue-200 rounded-lg" },
                        React.createElement('h3', { className: "text-sm font-semibold mb-2 text-blue-800" }, "Substitution History"),
                        React.createElement('div', { className: "space-y-1 max-h-32 overflow-y-auto" },
                            subHistory.slice(-5).map((sub, index) => (
                                React.createElement('div', { key: index, className: "text-xs text-blue-700" },
                                    `${sub.rotation === 'forward' ? 'â†’' : 'â†'} ${sub.out} â†’ ${sub.in} (${sub.position})`
                                )
                            ))
                        ),
                        React.createElement('button', {
                            onClick: () => {
                                setSubHistory([]);
                                setSubstitutionCount(0);
                            },
                            className: "mt-2 text-xs text-blue-600 hover:text-blue-800"
                        }, "Clear History")
                    )
                ),

                // Manual Sub Pairing Tool (for substitutional mode)
                playMode === 'substitutional' && (
                    React.createElement('div', { className: "mb-6 p-3 bg-purple-50 border border-purple-200 rounded-lg" },
                        React.createElement('h3', { className: "text-sm font-semibold mb-2 text-purple-800" }, "Manual Substitution Pairing"),
                        React.createElement('div', { className: "text-xs text-purple-700 mb-2" },
                            "Click two players to create a substitution pair, or drag and drop players to swap positions."
                        ),
                        React.createElement('div', { className: "flex gap-2 flex-wrap" },
                            players.filter(p => p.active && !p.star && !p.subPair).map(player => (
                                React.createElement('button', {
                                    key: player.id,
                                    onClick: () => {
                                        const selectedUnpaired = players.filter(p => p.active && !p.star && !p.subPair && p.id !== player.id);
                                        if (selectedUnpaired.length > 0) {
                                            createSubPair(player.id, selectedUnpaired[0].id);
                                        }
                                    },
                                    className: "px-2 py-1 bg-purple-200 text-purple-800 rounded text-xs hover:bg-purple-300",
                                    disabled: players.filter(p => p.active && !p.star && !p.subPair).length < 2
                                },
                                    player.name
                                )
                            ))
                        ),
                        players.filter(p => p.active && !p.star && !p.subPair).length === 0 && (
                            React.createElement('div', { className: "text-xs text-gray-500" }, "All eligible players are already paired or marked as no-sub")
                        )
                    )
                )
            );
        };

        ReactDOM.render(React.createElement(VolleyballApp), document.getElementById('root'));
    </script>
</body>
</html>
